(function(){var a,b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c){if(b.call(c,d))a[d]=c[d]}e.prototype=c.prototype;a.prototype=new e;a.__super__=c.prototype;return a};if(window.Kompot==null){window.Kompot={}}if((a=window.Kompot).Core==null){a.Core={}}Kompot.Core.ModelView=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}c(b,a);b.name="ModelView";b.prototype.tagName="li";b.prototype.initialize=function(a){var b=this;this.template=a.template||this.template;if(!this.template){throw"Template not specified"}if(!this.model){throw"Model not specified"}_.bindAll(this);this.model.bind("change",this.render);return this.model.bind("destroy",function(){return $(b.el).remove()})};b.prototype.render=function(){$(this.el).html(this.template({model:this.model.toJSON()}));return this};return b}(Backbone.View);Kompot.Core.CollectionView=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}c(b,a);b.name="CollectionView";b.prototype.rowPrototype=Kompot.Core.ModelView;b.prototype.initialize=function(a){this.collection=a.collection||new Backbone.Collection;this.rowPrototype=a.rowPrototype||this.rowPrototype;this.rowOptions=a.rowOptions||{};_.bindAll(this);this.collection.bind("reset",this.render);return this.collection.bind("add",this.render)};b.prototype.render=function(){var a=this;$(this.el).html("");this.collection.each(function(b){var c;c=new a.rowPrototype(_.extend({model:b},a.rowOptions));return $(a.el).append(c.render().el)});return this};return b}(Backbone.View);Kompot.decorate=function(a){if(!_.isFunction(a)){throw"View must extend a Backbone view class"}return{"with":function(d){var e,f,g,h,i,j;if(!_.isFunction(d)){throw"Decorator not specified"}e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}c(b,a);b.name="Decorated";return b}(Backbone.View);h=e.prototype.uber={};i=a.prototype;for(f in i){g=i[f];if(_.has(d,f)){h[f]=g}else{e.prototype[f]=g}}j=d.prototype;for(f in j){if(!b.call(j,f))continue;g=j[f];e.prototype[f]=g}e.prototype.events=_.extend({},a.prototype.events,d.prototype.events);return e}}}}).call(this)
